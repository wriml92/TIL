**TIL (Today I Learned): Kubernetes(K8S)**

---

## 1. Kubernetes란?
- **Google**이 내부 운영 노하우를 바탕으로 만든 **오픈소스 컨테이너 오케스트레이션 플랫폼**  
- 보통 **K8S**라는 약어로 부르며, “쿠버네티스”라고도 함  
- 도커(Docker) 등 컨테이너 환경에서 **자동 배포**, **확장**, **로드 밸런싱**, **장애 복구** 등을 체계적으로 처리

---

## 2. 왜 필요한가?

1. **컨테이너가 많아지면** 관리 어려움  
   - 컨테이너(예: Docker)를 단일 서버에서 몇 개 정도만 쓸 땐 간단하지만,  
   - 마이크로서비스 아키텍처나 대규모 트래픽 상황에서, **수십~수백 개** 컨테이너를 자동화 관리가 필요

2. **스케일링과 업그레이드** 자동화  
   - Kubernetes는 CPU/메모리 사용량을 모니터링해 컨테이너 **자동 확장**(auto-scaling) 가능  
   - 애플리케이션 버전 교체 시, **롤링 업데이트** 등을 통해 **무중단 배포** 가능

3. **고가용성(HA)**  
   - 특정 노드(서버)에 장애가 나면, **자동으로** 컨테이너를 다른 노드로 재시작/이동  
   - 전체 클러스터 수준에서 안정적으로 서비스 유지

---

## 3. 핵심 구성 요소

1. **노드(Node)**  
   - 실제 컨테이너(파드)가 구동되는 머신(물리 서버 또는 VM)  
   - **Worker Node**: 애플리케이션 컨테이너가 돌며, Kubelet/컨테이너 런타임(Docker 등)을 구동  
   - **Master Node**: 클러스터 상태 관리, 스케줄링, 컨트롤 플레인 역할 (kube-apiserver, etcd, scheduler 등)

2. **파드(Pod)**  
   - Kubernetes에서 컨테이너가 구동되는 **최소 배포 단위**  
   - 보통 **1개의 컨테이너**(또는 필요 시 여러 컨테이너)를 묶어서 파드 형태로 실행

3. **디플로이먼트(Deployment)**  
   - 파드의 **Desired State**(원하는 상태)를 정의하고, 실제 구동 수/버전을 조정하는 상위 객체  
   - 롤링 업데이트, 롤백 등 제공

4. **서비스(Service)**  
   - 파드가 동적으로 생성/소멸되어도, **일관된 네트워크 접근**(IP/포트) 지점을 제공  
   - 로드 밸런싱, 파드 디스커버리

5. **Ingress**  
   - 외부 트래픽(HTTP/HTTPS)을 클러스터 내부 서비스로 라우팅하기 위한 **엔트리 포인트**  
   - Nginx, HAProxy, AWS ALB 등 Ingress Controller를 통해 구현

---

## 4. 기본 흐름

1. **애플리케이션(컨테이너) 구성**  
   - Dockerfile 빌드 → 이미지 생성 → 레지스트리에 업로드  
2. **YAML 매니페스트 작성**  
   - Deployment, Service, Ingress 등을 YAML로 정의 (예: `deployment.yaml`, `service.yaml`)  
3. **kubectl apply**  
   - `kubectl apply -f deployment.yaml` 로 **클러스터**에 배포 명령  
   - Kubernetes가 실제 파드를 생성/스케줄링, 노드에 컨테이너 실행  
4. **모니터링 & 스케일링**  
   - CPU/메모리 혹은 HPA(Horizontal Pod Autoscaler) 등으로 파드 수 자동 조절  
5. **롤링 업데이트**  
   - 새 버전 Deployment 배포 시, 점진적으로 이전 버전을 대체 → 무중단 업데이트

---

## 5. 장점과 단점

### 장점
1. **자동화된 운영** (배포, 스케일링, 롤링업데이트)  
2. **추상화**: 클러스터 리소스(노드 등)를 파드/서비스라는 개념으로 추상화  
3. **보편적 표준**: 클라우드 벤더 어디서든 Kubernetes 호환 가능 (AWS EKS, GCP GKE, Azure AKS 등)

### 단점
1. **학습 곡선**이 높음 (YAML 파일, 여러 리소스 개념 파악 등)  
2. 클러스터 구성 자체가 **복잡** (인프라 지식 필요)  
3. 소규모 프로젝트에는 오히려 **과도한 오버헤드**

---

## 6. 오늘 배운 점

- Kubernetes(K8S)는 **컨테이너**를 많이 쓰는 환경에서 **오케스트레이션**을 자동화해주는 핵심 도구라는 걸 다시 확인  
- 파드/디플로이먼트/서비스/인그레스 등 **다양한 리소스**를 조합해, **무중단 배포**와 **고가용성**을 쉽게 구축 가능  
- 다만, 초기 설정과 학습 부담이 상당하므로, 팀 규모나 프로젝트 요구사항에 맞춰 도입해야겠다  
- GKE, EKS, AKS 등 클라우드 매니지드 서비스를 쓰면 인프라 부분이 간소화되어 시작 장벽이 낮아지는 편

---

### 한 줄 요약
“Kubernetes(K8S)는 **컨테이너** 배포·확장·관리를 자동화해주는 **오케스트레이션** 플랫폼으로, 대규모 마이크로서비스 환경에서 **고가용성**과 **유연한 스케일링**을 구현하는 데 필수적인 역할을 한다.”